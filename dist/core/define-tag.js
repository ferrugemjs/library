define(["require","exports","incremental-dom","document-register-element"],function(e,t,r){"use strict";function n(e,t,r){var n="on"+e.replace(/(^\D)/g,function(e,t){return e.toUpperCase()})+"Changed";this.controller[e]=r,this.controller[n]&&this.controller[n](r,t)}var o=function(e){var t=Object.create(HTMLElement.prototype,{createdCallback:{value:function(){var t=this.innerHTML;this.innerHTML="",this.el=this,this.controller={},e.controller&&(e.controller.prototype.refresh||(e.controller.prototype._$render_from_powerup=e.render,e.controller.prototype.refresh=function(){r.patch(this._$el$domref,this._$render_from_powerup,this)}),this.controller=new e.controller,this.controller._$el$domref=this.el),r.patch(this.el,e.render,this.controller),t&&this.el.getElementsByTagName("content").length>0&&(this.el.getElementsByTagName("content")[0].innerHTML=t)}},attachedCallback:{value:function(){for(var e=this.el.attributes.length;e--;){var t=this.el.attributes[e];n.apply(this,[t.name,t.value,t.value])}this.controller.attached&&this.controller.attached()}},attributeChangedCallback:{value:n}});document.registerElement(e.tag,{prototype:t})};return o});