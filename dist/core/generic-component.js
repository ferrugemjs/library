define(["require","exports","incremental-dom"],function(t,e,r){"use strict";var a={},s=(new Date).getTime()+1298;r.notifications.nodesDeleted=function(t){t.forEach(function(t){t.id&&a[t.id]&&a[t.id].detached&&a[t.id].detached(),t.id&&a[t.id]&&(a[t.id]=null,delete a[t.id])})};var i=function(){function e(){}return e.prototype.build=function(t){var r="";if(t.hostVars&&t.hostVars["key:id"]?(r=t.hostVars["key:id"],delete t.hostVars["key:id"]):t.staticVars&&t.staticVars["key:id"]&&(r=t.staticVars["key:id"],delete t.staticVars["key:id"]),t.classFactory.prototype.refresh||(t.classFactory.prototype.refresh=e.prototype.refresh),t.classFactory.prototype.content||(t.classFactory.prototype.content=e.prototype.content),r&&a[r]){if(t.hostVars)for(var s in t.hostVars)s.indexOf(".")>-1&&delete t.hostVars[s];return this.changeAttrs.call(a[r],t.hostVars),a[r]}if(r&&!a[r])return a[r]=new t.classFactory,a[r]._$target$_=t.target,a[r]._$key$_=r,a[r]._$tagName$_=t.tagName,this.changeAttrs.call(a[r],t.hostVars),this.changeAttrs.call(a[r],t.staticVars),a[r];var i=new t.classFactory;return i._$target$_=t.target,i._$tagName$_=t.tagName,this.changeAttrs.call(i,t.hostVars),this.changeAttrs.call(i,t.staticVars),i},e.prototype.content=function(t){return t?this._$content$_=t:this._$content$_&&this._$content$_(),this},e.prototype.changeAttrs=function(t,e){if(t)for(var r in t){var a=e&&("is"===r||"id"===r);if(!a){var s=r.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),i=t[r];if(s.indexOf(".")>-1){var n=s.split(".");this[n[0]][n[1]](i)}else{var o="set"+s.replace(/(^\D)/g,function(t,e){return t.toUpperCase()});this[o]?this[o](i):this[s]=i}}}},e.prototype.reDraw=function(){var t=this;t._$target$_=t._$target$_||"uid_"+s++ +"_provided";var e=Object.assign([],t._$atrrs$_.attribs["static"]);e.indexOf("id")<0?e.push("id",t._$target$_):t._$target$_=e[e.indexOf("id")+1],e.indexOf("is")<0&&e.push("is",t.is),r.elementOpen.apply(r,[t._$atrrs$_.name,t._$key$_,e].concat(new Function("$_this_$","return ["+t._$atrrs$_.attribs.dinamic+"]")(t))),t.render(t),r.elementClose(t._$atrrs$_.name),!t._$loaded$_&&t.attached&&t.attached(),t._$loaded$_||(t._$loaded$_=!0)},e.prototype.refresh=function(){var t=this;if(t._$target$_&&document.getElementById(t._$target$_)){var e=document.getElementById(t._$target$_);if(t._$atrrs$_.attribs.dinamic&&'""'!==t._$atrrs$_.attribs.dinamic){var a=new Function("$_this_$","return ["+t._$atrrs$_.attribs.dinamic+"]")(t);a.forEach(function(t,r){var s=r||2;s%2===0&&e.setAttribute(t,a[r+1])})}r.patch(e,t.render,t)}!t._$loaded$_&&t.attached&&t.attached(),t._$loaded$_||(t._$loaded$_=!0)},e.prototype.compose=function(e,r,a,s,i){var n=this;t([e+".html"],function(t){n.build({classFactory:t["default"],hostVars:a,staticVars:s,target:r,tagName:"compose-view"}).content(i).refresh()})},e}();e.FerrugemJSFactory=i,Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=new i});